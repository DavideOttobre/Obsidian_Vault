# ðŸ“œ 4.4 Animazioni e Transizioni nel DOM

## Introduzione

JavaScript permette di creare **animazioni e transizioni** sugli elementi del DOM senza bisogno di librerie esterne.

ðŸ“Œ **Cosa impareremo?**  
âœ… Modificare il CSS con JavaScript per animazioni.  
âœ… Usare `setInterval()` e `requestAnimationFrame()`.  
âœ… Creare transizioni fluide.

---

## ðŸ”¹ 1. Modificare il CSS dinamicamente

Possiamo modificare gli **stili CSS** con JavaScript per animare elementi.

### âœ… **Cambiare proprietÃ  con `style`**

```js
let box = document.getElementById("box");

box.addEventListener("click", () => {
    box.style.backgroundColor = "red";
    box.style.transform = "scale(1.2)";
});
```

ðŸ“Œ **Possiamo modificare qualsiasi proprietÃ  CSS.**

---

## ðŸ”¹ 2. Creare transizioni fluide

### âœ… **Usare `transition` in CSS**

Aggiungiamo questa regola nel nostro CSS:

```css
#box {
    transition: all 0.5s ease-in-out;
}
```

Ora, cambiando il CSS con JavaScript, lâ€™animazione sarÃ  fluida:

```js
box.addEventListener("click", () => {
    box.style.width = "200px";
    box.style.height = "200px";
});
```

ðŸ“Œ **Le transizioni permettono animazioni fluide senza `setInterval()`.**

---

## ðŸ”¹ 3. Creare animazioni con `setInterval()`

### âœ… **Esempio: Muovere un elemento a destra**

```js
let box = document.getElementById("box");
let posizione = 0;

let animazione = setInterval(() => {
    if (posizione >= 300) {
        clearInterval(animazione); // Ferma l'animazione
    } else {
        posizione += 5;
        box.style.left = posizione + "px";
    }
}, 50);
```

ðŸ“Œ **`setInterval()` esegue la funzione ogni 50ms, creando un effetto di movimento.**  
ðŸ“Œ **`clearInterval()` interrompe lâ€™animazione quando raggiunge il limite.**

---

## ðŸ”¹ 4. Usare `requestAnimationFrame()` per animazioni piÃ¹ fluide

`requestAnimationFrame()` Ã¨ preferito rispetto a `setInterval()` perchÃ© Ã¨ piÃ¹ efficiente e fluido.

### âœ… **Esempio di animazione fluida**

```js
let box = document.getElementById("box");
let posizione = 0;

function muovi() {
    if (posizione < 300) {
        posizione += 5;
        box.style.left = posizione + "px";
        requestAnimationFrame(muovi); // Chiede un nuovo frame
    }
}

requestAnimationFrame(muovi);
```

ðŸ“Œ **PerchÃ© usare `requestAnimationFrame()`?**  
âœ… Ãˆ piÃ¹ efficiente perchÃ© sincronizza lâ€™animazione con il refresh dello schermo.  
âœ… Riduce il consumo di CPU rispetto a `setInterval()`.

---

## ðŸ”¹ 5. Creare un effetto di dissolvenza (`opacity`)

### âœ… **Esempio con `setInterval()`**

```js
let box = document.getElementById("box");
let opacitÃ  = 1;

let fadeOut = setInterval(() => {
    if (opacitÃ  <= 0) {
        clearInterval(fadeOut);
        box.style.display = "none"; // Nasconde l'elemento
    } else {
        opacitÃ  -= 0.05;
        box.style.opacity = opacitÃ ;
    }
}, 50);
```

ðŸ“Œ **Diminuiamo `opacity` fino a 0 per creare un effetto di scomparsa graduale.**

---

## ðŸ”¹ 6. Esempio di combinazione di animazioni

ðŸ“Œ **Effetto: un box che cresce, si muove e cambia colore**

```js
let box = document.getElementById("box");
let posizione = 0;
let scala = 1;
let colori = ["red", "blue", "green", "purple"];
let indiceColore = 0;

function anima() {
    if (posizione < 300) {
        posizione += 5;
        scala += 0.01;
        indiceColore = (indiceColore + 1) % colori.length;

        box.style.left = posizione + "px";
        box.style.transform = `scale(${scala})`;
        box.style.backgroundColor = colori[indiceColore];

        requestAnimationFrame(anima);
    }
}

requestAnimationFrame(anima);
```

ðŸ“Œ **Combiniamo `left`, `scale` e `backgroundColor` per unâ€™animazione piÃ¹ dinamica.**

---

## ðŸ“Œ **Riepilogo**

|Metodo|Descrizione|
|---|---|
|`style.property`|Modifica direttamente lo stile CSS|
|`transition`|Crea animazioni fluide nei cambiamenti di stile|
|`setInterval()`|Esegue una funzione a intervalli regolari|
|`clearInterval()`|Ferma un `setInterval()` attivo|
|`requestAnimationFrame()`|Ottimizza le animazioni rispetto a `setInterval()`|

---

## Collegamenti utili

- **Prossimo argomento â†’ [[5.1 AJAX e Fetch API]]**
- **Ripassa gli Eventi nel DOM â†’ [[4.3 Eventi nel DOM]]**

---

# ğŸ“œ 2.3 JSON (JavaScript Object Notation)

## Introduzione

**JSON (JavaScript Object Notation)** Ã¨ un formato di dati leggero e leggibile, usato per scambiare informazioni tra applicazioni e server.

ğŸ“Œ **Caratteristiche principali:**

- **Basato su JavaScript**, ma usato in molti linguaggi.
- **Struttura semplice** con coppie **chiave-valore**.
- **Formato testuale**, leggibile sia da umani che da macchine.

In questa sezione vedremo:

- Struttura e sintassi di JSON
- Convertire tra JSON e oggetti JavaScript
- Leggere e scrivere JSON in JavaScript

---

## ğŸ”¹ 1. Struttura di un JSON

ğŸ“Œ **Un oggetto JSON ha la stessa sintassi degli oggetti JavaScript:**

```json
{
    "nome": "Alice",
    "etÃ ": 25,
    "cittÃ ": "Roma",
    "hobby": ["calcio", "lettura", "musica"]
}
```

ğŸ“Œ **Regole fondamentali:**  
âœ… Le **chiavi** devono essere stringhe con **doppie virgolette** (`" "`).  
âœ… I **valori** possono essere **stringhe, numeri, booleani, array o oggetti**.  
âœ… **I commenti NON sono permessi in JSON!**

---

## ğŸ”¹ 2. Differenza tra JSON e oggetti JavaScript

ğŸ”¹ **Oggetto JavaScript:**

```js
let persona = {
    nome: "Alice",
    etÃ : 25,
    cittÃ : "Roma"
};
```

ğŸ”¹ **JSON equivalente:**

```json
{
    "nome": "Alice",
    "etÃ ": 25,
    "cittÃ ": "Roma"
}
```

ğŸ“Œ **Differenze:**

|JavaScript|JSON|
|---|---|
|Le chiavi possono essere senza virgolette|Le chiavi DEVONO avere doppie virgolette|
|Supporta funzioni (`metodi`)|Non supporta funzioni|
|PuÃ² contenere variabili|Solo dati testuali|

---

## ğŸ”¹ 3. Convertire JSON in JavaScript (`JSON.parse()`)

ğŸ“Œ **Da JSON â†’ Oggetto JavaScript**

```js
let jsonString = '{"nome": "Alice", "etÃ ": 25, "cittÃ ": "Roma"}';
let oggetto = JSON.parse(jsonString);

console.log(oggetto.nome); // â "Alice"
console.log(oggetto.etÃ ); // â 25
```

ğŸ“Œ **`JSON.parse()` converte una stringa JSON in un oggetto JavaScript.**

âš ï¸ **Errore comune: JSON non valido!**

```js
let jsonErrato = "{nome: 'Alice'}"; // âŒ Errore: le chiavi devono avere doppie virgolette
JSON.parse(jsonErrato); // SyntaxError
```

âœ… **Corretto:**

```js
let jsonCorretto = '{"nome": "Alice"}';
JSON.parse(jsonCorretto);
```

---

## ğŸ”¹ 4. Convertire JavaScript in JSON (`JSON.stringify()`)

ğŸ“Œ **Da Oggetto JavaScript â†’ JSON**

```js
let persona = {
    nome: "Luca",
    etÃ : 30,
    cittÃ : "Milano"
};

let jsonString = JSON.stringify(persona);
console.log(jsonString);
// â '{"nome":"Luca","etÃ ":30,"cittÃ ":"Milano"}'
```

ğŸ“Œ **`JSON.stringify()` trasforma un oggetto in una stringa JSON.**

âœ… **Utile per inviare dati a un server!**

---

## ğŸ”¹ 5. JSON con oggetti e array

### âœ… **JSON con array**

```json
{
    "nome": "Elena",
    "hobby": ["disegno", "chitarra", "palestra"]
}
```

ğŸ“Œ **Convertire un JSON con array in JavaScript:**

```js
let jsonString = '{"nome": "Elena", "hobby": ["disegno", "chitarra", "palestra"]}';
let utente = JSON.parse(jsonString);

console.log(utente.hobby[1]); // â "chitarra"
```

---

### âœ… **JSON con oggetti annidati**

```json
{
    "nome": "Giovanni",
    "indirizzo": {
        "cittÃ ": "Torino",
        "cap": "10121"
    }
}
```

ğŸ“Œ **Accedere agli oggetti annidati in JavaScript:**

```js
let jsonString = '{"nome": "Giovanni", "indirizzo": {"cittÃ ": "Torino", "cap": "10121"}}';
let utente = JSON.parse(jsonString);

console.log(utente.indirizzo.cittÃ ); // â "Torino"
```

---

## ğŸ”¹ 6. Verificare se una stringa Ã¨ JSON valido

ğŸ“Œ **Usiamo `try...catch` per evitare errori:**

```js
function isJSON(str) {
    try {
        JSON.parse(str);
        return true;
    } catch (e) {
        return false;
    }
}

console.log(isJSON('{"nome": "Luca"}')); // â true
console.log(isJSON("{nome: 'Luca'}")); // â false
```

ğŸ“Œ **Utile per controllare JSON ricevuti da API o file!**

---

## ğŸ”¹ 7. Caricare JSON da un file o API

### âœ… **Caricare JSON da un file (Fetch API)**

```js
fetch("dati.json")
    .then(response => response.json()) // Converte la risposta in JSON
    .then(data => console.log(data))
    .catch(error => console.error("Errore:", error));
```

ğŸ“Œ **Spiegazione:**

1. `fetch()` recupera il file JSON.
2. `.json()` lo converte in oggetto JavaScript.
3. `.catch()` gestisce errori (es. file non trovato).

---

## ğŸ”¹ 8. Salvare dati in `localStorage` con JSON

### âœ… **Salvare un oggetto come JSON**

```js
let utente = { nome: "Sara", etÃ : 28 };
localStorage.setItem("utente", JSON.stringify(utente));
```

### âœ… **Recuperare e convertire il JSON salvato**

```js
let dati = localStorage.getItem("utente");
let utente = JSON.parse(dati);

console.log(utente.nome); // â "Sara"
```

ğŸ“Œ **Utile per salvare dati tra sessioni senza database.**

---

## ğŸ“Œ **Riepilogo**

|Metodo|Descrizione|
|---|---|
|`JSON.parse()`|Converte JSON â†’ Oggetto JavaScript|
|`JSON.stringify()`|Converte Oggetto JavaScript â†’ JSON|
|`fetch()`|Recupera dati JSON da un file/API|
|`localStorage.setItem()`|Salva JSON nel browser|
|`localStorage.getItem()`|Recupera JSON salvato|

---

## Collegamenti utili

- **Prossimo argomento â†’ [[2.4 Date e Time]]**
- **Ripassa gli oggetti â†’ [[2.2 Oggetti]]**

---
